{"version":3,"sources":["js/03-promises.js"],"names":["formRef","document","querySelector","STORAGE_KEY","onFormInput","evt","formData","JSON","parse","localStorage","getItem","target","name","value","setItem","stringify","onFormSubmit","preventDefault","checkedData","delay","step","amount","delayData","Number","stepData","amountData","console","log","reset","removeItem","createPromise","position","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","then","result","catch","error","addEventListener"],"mappings":";AAAA,MAAMA,EAAUC,SAASC,cAAc,QAEjCC,EAAc,sBAKpB,SAASC,EAAYC,GACZC,MAAAA,EAAWC,KAAKC,MAAMC,aAAaC,QAAQP,KAAiB,GAEjEG,EAASD,EAAIM,OAAOC,MAAQP,EAAIM,OAAOE,MACtCJ,aAAaK,QAAQX,EAAaI,KAAKQ,UAAUT,IAItD,SAASU,EAAaX,GACpBA,EAAIY,iBACEC,MAAAA,EAAcX,KAAKC,MAAMC,aAAaC,QAAQP,KAAiB,GACjE,IAACe,EAAYC,QAAUD,EAAYE,OAASF,EAAYG,OAC1D,OAEEC,IAAAA,EAAYC,OAAOL,EAAYC,OAC7BK,MAAAA,EAAWD,OAAOL,EAAYE,MAC9BK,EAAaF,OAAOL,EAAYG,QAItCK,QAAQC,IAAIlB,aAAaC,QAAQP,IACjCE,EAAIM,OAAOiB,QACXnB,aAAaoB,WAAW1B,GAEnB,IAAA,IAAIkB,EAAS,EAAGA,EAASI,EAAYJ,IACxCS,EAAcT,EAAS,EAAGC,GAAWE,GAG9BM,SAAAA,EAAcC,EAAUZ,GAEjB,IAAIa,QAAQ,CAACC,EAASC,KAC9BC,MAAAA,EAAgBC,KAAKC,SAAW,GACtCC,WAAW,KAELH,EACHF,yBAAgCF,QAAeZ,OAEhDe,wBAA6BH,QAAeZ,QAE3CA,KAGKoB,KAAKC,IACXd,QAAQC,IAAIa,KACXC,MAAMC,IACPhB,QAAQC,IAAIe,MAhDlB1C,EAAQ2C,iBAAiB,QAASvC,GAClCJ,EAAQ2C,iBAAiB,SAAU3B","file":"03-promises.bc246841.js","sourceRoot":"../src","sourcesContent":["const formRef = document.querySelector('form');\n\nconst STORAGE_KEY = 'feedback-form-state';\n\nformRef.addEventListener('input', onFormInput);\nformRef.addEventListener('submit', onFormSubmit);\n\nfunction onFormInput(evt) {\n   const formData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};\n   \n    formData[evt.target.name] = evt.target.value;\n     localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n  \n}\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n  const checkedData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || '';\n  if (!checkedData.delay || !checkedData.step || !checkedData.amount) {\n    return\n  }\n  let delayData = Number(checkedData.delay);\n  const stepData = Number(checkedData.step);\n  const amountData = Number(checkedData.amount);\n  \n\n\n  console.log(localStorage.getItem(STORAGE_KEY));\n  evt.target.reset();\n  localStorage.removeItem(STORAGE_KEY);\n\n  for (let amount = 0; amount < amountData; amount++)\n    createPromise(amount + 1, delayData+=stepData);\n   \n\n  function createPromise(position, delay) {\n \n  const promise = new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    setTimeout(() => {\n    \n      if (shouldResolve) {\n       resolve (`✅ Fulfilled promise ${position} in ${delay}ms`);\n      } else {\n      reject(`❌ Rejected promise ${position} in ${delay}ms`);\n      }\n    }, delay);\n  })\n \n    promise.then(result => {\n      console.log(result);\n    }).catch(error => {\n      console.log(error);\n    })\n    \n}\n}\n\n\n \n\n"]}